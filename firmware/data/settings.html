<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="description" content="AE CM Web Server" />
    <meta name="author" content="AE 2025" />
    <!-- Favicon-->
    <title>AE CM Settings</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Cache-control" content="public">
    <link rel="icon" href="src/favicon.png" sizes="32x32">
    <!-- COMMENT THE TWO LINES BELOW WHEN IN PROD!!! 
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    -->
    <!-- COMMENT THE TWO LINES BELOW WHEN IN DEV!!! -->
    <link rel="stylesheet" type="text/css" href="src/styles.css">
    <script src="src/bootstrap.min.js" type="text/javascript"></script>

    <style>
        .alert-warning {
            visibility: hidden;
            /* Hidden by default. Visible on click */
            color: #856404;
            background-color: #fff3cd;
            border-color: #ffeeba;
            text-align: center;
        }

        .alert-success {
            color: #155724;
            visibility: hidden;
            /* Hidden by default. Visible on click */
            text-align: center;
        }
    </style>

</head>

<body>
    <!-- Responsive navbar-->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container px-lg-5">
            <a class="navbar-brand" href="https://store.aceselectronics.com.au/"><img src="src/ae_black_64.png"
                alt="AE web site" height="36"></a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                    <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="io.html">IO</a></li>
                    <li class="nav-item"><a class="nav-link" href="api">API</a></li>
                    <li class="nav-item"><a class="nav-link active" aria-current="page"
                            href="settings.html">Settings</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- Header-->
    <div class="alert alert-warning" role="alert" id="snackbar">Saving settings...</div>
    <form action="/savedata" class="box d-grid gap-3" target="hidden-form" id="settings-form">
        <div class="container px-lg-5">
            <div class="p-4 p-lg-5 bg-light rounded-3">
                <h1 class="display-5 fw-bold text-center">
                    <span id="friendlyname">%friendlyname%</span> - General Settings
                    <br>
                    <span id="hostname">%hostname%</span>
                </h1>

                <div class="form-group row">
                    <label for="hostname" class="col-sm-2 col-form-label fw-bold">Hostname</label>
                    <div class="col-sm-10">
                        <input type="text" name="hostname" class="form-control fst-italic" id="hostname"
                            placeholder="%hostname%" value="%hostname%" minlength="3" maxlength="20" size="20" title="Enter a hostname, 3-20 characters, beginning with a letter and containing only alphanumeric
                                characters and/or a single hyphen.  It must end with an alphanumeric character."
                            pattern="[-a-zA-Z0-9(),.:\s]{1,25}">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="friendlyname" class="col-sm-2 col-form-label fw-bold">Device Label</label>
                    <div class="col-sm-10">
                        <input type="text" name="friendlyname" class="form-control fst-italic" id="friendlyname"
                            placeholder="AE CM" value="%friendlyname%" minlength="1" maxlength="25" size="25"
                            pattern="[-a-zA-Z0-9(),.:\s]{1,25}"
                            title="Only the following characters are allowed: A-Za-z0-9_()., :-'<> with a length between 1 and 25 characters.">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="ch1name" class="col-sm-2 col-form-label fw-bold">ADC CH 1 Label</label>
                    <div class="col-sm-10">
                        <input type="text" name="ch1name" class="form-control fst-italic" id="ch1name"
                            placeholder="e.g.:12V Battery Bank (100V DC Max.)" value="%ch1name%" minlength="1"
                            maxlength="25" size="25" pattern="[-a-zA-Z0-9(),.:\s]{1,25}"
                            title="Only the following characters are allowed: A-Za-z0-9_().,:-' <> with a length between 1 and 25 characters.">
                    </div>

                </div>
                <div class="form-group row">
                    <label for="ch2name" class="col-sm-2 col-form-label fw-bold">ADC CH 2 Label</label>
                    <div class="col-sm-10">
                        <input type="text" name="ch2name" class="form-control fst-italic" id="ch2name"
                            placeholder="e.g.:24V Battery Bank (100V DC Max.)" value="%ch2name%" minlength="1"
                            maxlength="25" size="25" pattern="[-a-zA-Z0-9(),.:\s]{1,25}"
                            title="Only the following characters are allowed: A-Za-z0-9_().,:-<>' with a length between 1 and 25 characters.">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="ch3name" class="col-sm-2 col-form-label fw-bold">ADC CH 3 Label</label>
                    <div class="col-sm-10">
                        <input type="text" name="ch3name" class="form-control fst-italic" id="ch3name"
                            placeholder="e.g.:48V Battery Bank (100V DC Max.)" value="%ch3name%" minlength="1"
                            maxlength="25" size="25" pattern="[-a-zA-Z0-9(),.:\s]{1,25}"
                            title="Only the following characters are allowed: A-Za-z0-9_().,:-<>' with a length between 1 and 25 characters.">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="relay1name" class="col-sm-2 col-form-label fw-bold">Relay 1 Label</label>
                    <div class="col-sm-10">
                        <input type="text" name="relay1name" class="form-control fst-italic" id="relay1name"
                            placeholder="e.g.:Pump (1A Max.)" value="%relay1name%" minlength="1" maxlength="20"
                            size="20" pattern="[_a-zA-Z0-9(),.:'\-]{1,20}"
                            title="Only the following characters are allowed: A-Za-z0-9_().,:-<>' with a length between 1 and 16 characters.">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="relay2name" class="col-sm-2 col-form-label fw-bold">Relay 2 Label</label>
                    <div class="col-sm-10">
                        <input type="text" name="relay2name" class="form-control fst-italic" id="relay2name"
                            placeholder="e.g.:Shed Light (1A Max.)" value="%relay2name%" maxlength="20" size="20"
                            pattern="[_a-zA-Z0-9(),.:'\-]{1,20}"
                            title="Only the following characters are allowed: A-Za-z0-9_().,:-<>' with a length between 1 and 16 characters.">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="httpusername" class="col-sm-2 col-form-label fw-bold">HTTP Username</label>
                    <div class="col-sm-10">
                        <input type="text" name="httpusername" class="form-control fst-italic" id="httpusername"
                            placeholder="admin_username" value="%httpusername%" minlength="5" maxlength="25" size="25"
                            pattern="[_a-zA-Z0-9(),.:\-' ]{5,25}"
                            title="Only the following characters are allowed: _A-Za-z0-9_().,:-<>' with a length between 5 and 25 characters.">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="httppassword" class="col-sm-2 col-form-label fw-bold">HTTP Password</label>
                    <div class="col-sm-10">
                        <input type="text" name="httppassword" class="form-control fst-italic" id="httppassword"
                            placeholder="********" value="%httppassword%" minlength="5" maxlength="25" size="25"
                            pattern="[_a-zA-Z0-9(),.:\- ]{5,25}"
                            title="Only the following characters are allowed: _A-Za-z0-9_().,:-<>' with a length between 5 and 25 characters.">
                    </div>
                </div>
                <input type="hidden" id="generalsourcecheck" name="generalsourcecheck" value="valid">
            </div>
        </div>
        <div class="container px-lg-5">
            <div class="p-4 p-lg-5 bg-light rounded-3">
                <h1 class="display-5 fw-bold text-center">Ethernet Settings</h1>
                <div class="form-check form-switch" style="padding: unset;">
                    <label class="form-check-label fw-bold text-center text-decoration-underline" for="ethenabled">Enable
                        Ethernet Interface (Wired)
                        Configuration<input style="float: right; margin-left: 10px;" class="form-check-input"
                            name="ethenabled" type="checkbox" onchange="enableEthernetMode(this)" id="ethenabled">
                    </label>
                </div>
                <div class="form-check form-switch" style="padding: unset;">
                    <label class="form-check-label fw-bold text-center text-decoration-underline"
                        for="staticethipen">Enable Static IP
                        Configuration (DHCP if disabled)<input style="float: right; margin-left: 10px;"
                            class="form-check-input" name="staticethipen" type="checkbox"
                            onchange="enableEthernetStaticIP(this)" id="staticethipen">
                    </label>
                </div>
                <div class="form-group row">
                    <label for="ipaddress" class="col-sm-2 col-form-label fw-bold">ETH IPv4 Address</label>
                    <div class="col-sm-10">
                        <input required type="text" name="ipaddress" class="form-control fst-italic" id="ipaddress"
                            placeholder="192.168.137.137" value="%ipaddress%" minlength="7" maxlength="15" size="15"
                            pattern="^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="subnet" class="col-sm-2 col-form-label fw-bold">ETH Subnet</label>
                    <div class="col-sm-10">
                        <input required type="text" name="subnet" class="form-control fst-italic" id="subnet"
                            placeholder="255.255.255.0" value="%subnet%" minlength="7" maxlength="15" size="15"
                            pattern="^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="gateway" class="col-sm-2 col-form-label fw-bold">ETH Gateway</label>
                    <div class="col-sm-10">
                        <input required type="text" name="gateway" class="form-control fst-italic" id="gateway"
                            placeholder="192.168.137.1" value="%gateway%" minlength="7" maxlength="15" size="15"
                            pattern="^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="dns" class="col-sm-2 col-form-label fw-bold">ETH DNS Server</label>
                    <div class="col-sm-10">
                        <input type="text" name="dns" class="form-control fst-italic" id="dns" placeholder="8.8.8.8"
                            value="%dns%" minlength="7" maxlength="15" size="15"
                            pattern="^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$">
                    </div>
                    <input type="hidden" id="ethsourcecheck" name="ethsourcecheck" value="valid">
                </div>
            </div>
        </div>

        <div class="container px-lg-5">
            <div class="p-4 p-lg-5 bg-light rounded-3">
                <h1 class="display-5 fw-bold text-center"> WiFi Client Settings</h1>

                <div class="form-check form-switch" style="padding: unset;">
                    <label class="form-check-label fw-bold text-center text-decoration-underline"
                        for="staenabled">Enable
                        WiFi Client (Wireless)
                        Configuration<input style="float: right; margin-left: 10px;" class="form-check-input"
                            name="staenabled" type="checkbox" onchange="enableWiFiSTAMode(this)" id="staenabled">
                    </label>
                </div>

                <div class="form-check form-switch" style="padding: unset;">
                    <label class="form-check-label fw-bold text-center text-decoration-underline"
                        for="staticstaipen">Enable Static IP
                        Configuration (DHCP if disabled)<input style="float: right; margin-left: 10px;"
                            class="form-check-input" name="staticstaipen" type="checkbox"
                            onchange="enableSTAStaticIP(this)" id="staticstaipen">
                    </label>
                </div>

                <div class="form-group row">
                    <label for="apssid" class="col-sm-2 col-form-label fw-bold">Client SSID Name</label>
                    <div class="col-sm-10">
                        <input required type="text" name="stassid" class="form-control fst-italic" id="stassid"
                            placeholder="Network's name to connect to" value="%stassid%" minlength="1" maxlength="25"
                            size="25" pattern="[_a-zA-Z0-9(),.:\- ]{5,25}"
                            title="Only the following characters are allowed: _A-Za-z0-9_().,:-<>' with a length between 1 and 25 characters.">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="appwd" class="col-sm-2 col-form-label fw-bold">Client Password</label>
                    <div class="col-sm-10">
                        <input required type="text" name="stapwd" class="form-control fst-italic" id="stapwd"
                            id="stapwd" placeholder="Password for that network" value="%stapwd%" minlength="1"
                            maxlength="25" size="25" pattern="[_a-zA-Z0-9(),.:\- ]{5,25}"
                            title="Only the following characters are allowed: _A-Za-z0-9_().,:-<>' with a length between 1 and 25 characters.">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="staipaddress" class="col-sm-2 col-form-label fw-bold">Client IPv4 Address</label>
                    <div class="col-sm-10">
                        <input required type="text" name="staipaddress" class="form-control fst-italic"
                            id="staipaddress" placeholder="192.168.4.1" value="%staipaddress%" minlength="7"
                            maxlength="15" size="15"
                            pattern="^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="stasubnet" class="col-sm-2 col-form-label fw-bold">Client Subnet</label>
                    <div class="col-sm-10">
                        <input required type="text" name="stasubnet" class="form-control fst-italic" id="stasubnet"
                            placeholder="255.255.255.0" value="%stasubnet%" minlength="7" maxlength="15" size="15"
                            pattern="^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="stagateway" class="col-sm-2 col-form-label fw-bold">Client Gateway</label>
                    <div class="col-sm-10">
                        <input required type="text" name="stagateway" class="form-control fst-italic" id="stagateway"
                            placeholder="192.168.0.250" value="%stagateway%" minlength="7" maxlength="15" size="15"
                            pattern="^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$">
                    </div>
                    <input type="hidden" id="stasourcecheck" name="stasourcecheck" value="valid">
                </div>
            </div>
        </div>

        <div class="container px-lg-5">
            <div class="p-4 p-lg-5 bg-light rounded-3">
                <h1 class="display-5 fw-bold text-center"> WiFi AP Settings</h1>
                <div class="form-check form-switch" style="padding: unset;">
                    <label class="form-check-label fw-bold text-center text-decoration-underline" for="apenabled">Enable
                        WiFi AP (Configuration) Mode
                        Configuration<input style="float: right; margin-left: 10px;" class="form-check-input"
                            name="apenabled" type="checkbox" onchange="enableWiFiAPMode(this)" id="apenabled">
                    </label>
                </div>
                <div class="form-group row">
                    <label for="apssid" class="col-sm-2 col-form-label fw-bold">AP Name</label>
                    <div class="col-sm-10">
                        <input required type="text" name="apssid" class="form-control fst-italic" id="apssid"
                            placeholder="Network's name to connect to" value="%apssid%" minlength="1" maxlength="25"
                            size="25" pattern="[_a-zA-Z0-9(),.:\- ]{5,25}"
                            title="Only the following characters are allowed: _A-Za-z0-9_().,:-<>' with a length between 1 and 25 characters.">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="appwd" class="col-sm-2 col-form-label fw-bold">AP Password</label>
                    <div class="col-sm-10">
                        <input required type="text" name="appwd" class="form-control fst-italic" id="appwd" id="appwd"
                            placeholder="Password for that network" value="%appwd%" minlength="1" maxlength="25"
                            size="25" pattern="[_a-zA-Z0-9(),.:\- ]{5,25}"
                            title="Only the following characters are allowed: _A-Za-z0-9_().,:-<>' with a length between 1 and 25 characters.">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="apipaddress" class="col-sm-2 col-form-label fw-bold">AP IPv4 Address</label>
                    <div class="col-sm-10">
                        <input required type="text" name="apipaddress" class="form-control fst-italic" id="apipaddress"
                            placeholder="192.168.4.1" value="%apipaddress%" minlength="7" maxlength="15" size="15"
                            pattern="^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="apsubnet" class="col-sm-2 col-form-label fw-bold">AP Subnet</label>
                    <div class="col-sm-10">
                        <input required type="text" name="apsubnet" class="form-control fst-italic" id="apsubnet"
                            placeholder="255.255.255.0" value="%apsubnet%" minlength="7" maxlength="15" size="15"
                            pattern="^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="apgateway" class="col-sm-2 col-form-label fw-bold">AP Gateway</label>
                    <div class="col-sm-10">
                        <input required type="text" name="apgateway" class="form-control fst-italic" id="apgateway"
                            placeholder="192.168.4.1" value="%apgateway%" minlength="7" maxlength="15" size="15"
                            pattern="^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$">
                    </div>
                </div>
                <input type="hidden" id="apsourcecheck" name="apsourcecheck" value="valid">
                <br>
                <div class="form-group row">
                    <div class="col-sm-3 text-center">
                        <button type="submit" onclick="apaddspinner()" class="btn btn-primary btn-lg">Save</button>
                        <span class="" id="apsavesuccessful"></span>
                    </div>
                </div>
            </div>
            <iframe style="display:none" id="hidden-form" name="hidden-form"></iframe>
        </div>

        <div class="container px-lg-5">
            <div class="p-4 p-lg-5 bg-light rounded-3">
                <h1 class="display-5 fw-bold text-center">Firmware Update</h1>
                <div class="form-group row">
                    <label class="col-sm-2 col-form-label fw-bold">Firmware Update</label>
                    <div class="col-sm-10">
                        <a class="btn btn-primary" href="/update">Launch OTA</a>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <!-- Footer-->
    <footer class="py-5 bg-dark">
        <div class="container">
            <p class="m-0 text-center text-white">Copyright &copy; AE 2025</p>
        </div>
    </footer>
    <script>

        function genaddspinner() {
            var x = document.getElementById("snackbar");
            x.className = "show alert alert-warning";
            x.style.backgroundColor = "coral";
            x.innerHTML = "Saving General settings...";
            console.log("Showing saving snackbar");
            setTimeout(function () { x.className = x.className.replace("show", "hidden"); }, 5000);
        }
        function ethaddspinner() {
            var x = document.getElementById("snackbar");
            x.className = "show alert alert-warning";
            x.style.backgroundColor = "coral";
            x.innerHTML = "Saving Ethernet settings...";
            console.log("Showing saving snackbar");
            setTimeout(function () { x.className = x.className.replace("show", "hidden"); }, 5000);
        }
        function staaddspinner() {
            var x = document.getElementById("snackbar");
            x.className = "show alert alert-warning";
            x.style.backgroundColor = "coral";
            x.innerHTML = "Saving Station settings...";
            console.log("Showing saving snackbar");
            setTimeout(function () { x.className = x.className.replace("show", "hidden"); }, 5000);
        }
        function apaddspinner() {
            var x = document.getElementById("snackbar");
            x.className = "show alert alert-warning";
            x.style.backgroundColor = "coral";
            x.innerHTML = "Saving Ethernet settings...";
            console.log("Showing saving snackbar");
            setTimeout(function () { x.className = x.className.replace("show", "hidden"); }, 5000);
        }

        function enableEthernetMode(element) {
            if (element.checked) {
                console.log('Ethernet config enabled in settings')
                document.getElementById("staenabled").checked = false;
                document.getElementById("apenabled").checked = false;
            } else {
                console.log('Ethernet config disabled in settings')
            }
        }

        function enableWiFiAPMode(element) {
            var APIPElement = document.getElementById("apipaddress");
            var a1 = document.createAttribute("readonly");
            var APSubnetElement = document.getElementById("apsubnet");
            var a2 = document.createAttribute("readonly");
            var APGatewayElement = document.getElementById("apgateway");
            var a3 = document.createAttribute("readonly");
            var APSSIDElement = document.getElementById("apssid");
            var a4 = document.createAttribute("readonly");
            var APPWDElement = document.getElementById("appwd");
            var a5 = document.createAttribute("readonly");
            if (element.checked) {
                console.log('AP config enabled in settings')
                APIPElement.removeAttribute("readonly");
                APSubnetElement.removeAttribute("readonly");
                APGatewayElement.removeAttribute("readonly");
                APSSIDElement.removeAttribute("readonly");
                APPWDElement.removeAttribute("readonly");
                document.getElementById("staenabled").checked = false;
                document.getElementById("ethenabled").checked = false;
                
            } else {
                console.log('AP config disabled in settings')
                APIPElement.setAttributeNode(a1);
                APSubnetElement.setAttributeNode(a2);
                APGatewayElement.setAttributeNode(a3);
                APSSIDElement.setAttributeNode(a4);
                APPWDElement.setAttributeNode(a5);
            }
        }

        function enableWiFiSTAMode(element) {
            var STAIPElement = document.getElementById("staipaddress");
            var STASSIDElement = document.getElementById("stassid");
            var a4 = document.createAttribute("readonly");
            var STAPWDElement = document.getElementById("stapwd");
            var a5 = document.createAttribute("readonly");
            if (element.checked) {
                console.log('STA config enabled in settings')
                STASSIDElement.removeAttribute("readonly");
                STAPWDElement.removeAttribute("readonly");
                document.getElementById("ethenabled").checked = false;
                document.getElementById("apenabled").checked = false;
            } else {
                console.log('STA config disabled in settings')
                STASSIDElement.setAttributeNode(a4);
                STAPWDElement.setAttributeNode(a5);
            }
        }

        function enableEthernetStaticIP(element) {
            var IPElement = document.getElementById("ipaddress");
            var a1 = document.createAttribute("readonly");
            var subnetElement = document.getElementById("subnet");
            var a2 = document.createAttribute("readonly");
            var gatewayElement = document.getElementById("gateway");
            var a3 = document.createAttribute("readonly");
            var dnsElement = document.getElementById("dns");
            var a4 = document.createAttribute("readonly");
            if (element.checked) {
                console.log('Static IP config enabled in settings')
                IPElement.removeAttribute("readonly");
                subnetElement.removeAttribute("readonly");
                gatewayElement.removeAttribute("readonly");
                dnsElement.removeAttribute("readonly");
            } else {
                console.log('Static IP config disabled in settings')
                IPElement.setAttributeNode(a1);
                subnetElement.setAttributeNode(a2);
                gatewayElement.setAttributeNode(a3);
                dnsElement.setAttributeNode(a4);
            }
        }

        function enableSTAStaticIP(element) {
            var STAIPElement = document.getElementById("staipaddress");
            var a1 = document.createAttribute("readonly");
            var STASubnetElement = document.getElementById("stasubnet");
            var a2 = document.createAttribute("readonly");
            var STAGatewayElement = document.getElementById("stagateway");
            var a3 = document.createAttribute("readonly");
            if (element.checked) {
                console.log('STA config enabled in settings')
                STAIPElement.removeAttribute("readonly");
                STASubnetElement.removeAttribute("readonly");
                STAGatewayElement.removeAttribute("readonly");
            } else {
                console.log('STA config disabled in settings')
                STAIPElement.setAttributeNode(a1);
                STASubnetElement.setAttributeNode(a2);
                STAGatewayElement.setAttributeNode(a3);
            }
        }

        var hostnameForm = document.getElementById("hostname");
        hostnameForm.addEventListener("input", function () {
            if (hostnameForm.value.length != 0) {
                hostnameForm.classList.remove("fst-italic");
            } else {
                hostnameForm.classList.add("fst-italic");
            }
        });

        var friendlyname = document.getElementById("friendlyname");
        friendlyname.addEventListener("input", function () {
            if (friendlyname.value.length != 0) {
                friendlyname.classList.remove("fst-italic");
            } else {
                friendlyname.classList.add("fst-italic");
            }
        });

        var staticethipen = document.getElementById("staticethipen");
        staticethipen.addEventListener("input", function () {
            if (staticethipen.value.length != 0) {
                staticethipen.classList.remove("fst-italic");
            } else {
                staticethipen.classList.add("fst-italic");
            }
        });

        var ipaddress = document.getElementById("ipaddress");
        ipaddress.addEventListener("input", function () {
            if (ipaddress.value.length != 0) {
                ipaddress.classList.remove("fst-italic");
            } else {
                ipaddress.classList.add("fst-italic");
            }
        });

        var subnet = document.getElementById("subnet");
        subnet.addEventListener("input", function () {
            if (subnet.value.length != 0) {
                subnet.classList.remove("fst-italic");
            } else {
                subnet.classList.add("fst-italic");
            }
        });

        var gateway = document.getElementById("gateway");
        gateway.addEventListener("input", function () {
            if (gateway.value.length != 0) {
                gateway.classList.remove("fst-italic");
            } else {
                gateway.classList.add("fst-italic");
            }
        });

        var dns = document.getElementById("dns");
        dns.addEventListener("input", function () {
            if (dns.value.length != 0) {
                dns.classList.remove("fst-italic");
            } else {
                dns.classList.add("fst-italic");
            }
        });

        var ch1name = document.getElementById("ch1name");
        ch1name.addEventListener("input", function () {
            if (ch1name.value.length != 0) {
                ch1name.classList.remove("fst-italic");
            } else {
                ch1name.classList.add("fst-italic");
            }
        });

        var ch2name = document.getElementById("ch2name");
        ch2name.addEventListener("input", function () {
            if (ch2name.value.length != 0) {
                ch2name.classList.remove("fst-italic");
            } else {
                ch2name.classList.add("fst-italic");
            }
        });

        var ch3name = document.getElementById("ch3name");
        ch3name.addEventListener("input", function () {
            if (ch3name.value.length != 0) {
                ch3name.classList.remove("fst-italic");
            } else {
                ch3name.classList.add("fst-italic");
            }
        });

        var relay1name = document.getElementById("relay1name");
        relay1name.addEventListener("input", function () {
            if (relay1name.value.length != 0) {
                relay1name.classList.remove("fst-italic");
            } else {
                relay1name.classList.add("fst-italic");
            }
        });

        var relay2name = document.getElementById("relay2name");
        relay2name.addEventListener("input", function () {
            if (relay2name.value.length != 0) {
                relay2name.classList.remove("fst-italic");
            } else {
                relay2name.classList.add("fst-italic");
            }
        });

        function setDefaults() {
            //need to add the rest of the forms
            if ("%staticethipen%" == "1") {
                document.getElementById("staticethipen").setAttribute("checked", "");
                document.getElementById("ipaddress").removeAttribute("readonly");
                document.getElementById("subnet").removeAttribute("readonly");
                document.getElementById("gateway").removeAttribute("readonly");
                document.getElementById("dns").removeAttribute("readonly");
                console.log('Static Ethernet IP config "True" has been loaded');
            }
            else {
                document.getElementById("staticethipen").removeAttribute("checked", "");
                document.getElementById("ipaddress").setAttribute("readonly", "");
                document.getElementById("subnet").setAttribute("readonly", "");
                document.getElementById("gateway").setAttribute("readonly", "");
                document.getElementById("dns").setAttribute("readonly", "");
                console.log('Static Ethernet IP config "False" has been loaded');
            }
            if ("%staenabled%" == "1") {
                document.getElementById("staenabled").setAttribute("checked", "");
                document.getElementById("stassid").removeAttribute("readonly");
                document.getElementById("stapwd").removeAttribute("readonly");
                document.getElementById("staipaddress").removeAttribute("readonly");
                document.getElementById("stasubnet").removeAttribute("readonly");
                document.getElementById("stagateway").removeAttribute("readonly");
                console.log('WiFi Station config true has been loaded');
            }
            else {
                document.getElementById("staenabled").removeAttribute("checked", "");
                document.getElementById("stassid").setAttribute("readonly", "");
                document.getElementById("stapwd").setAttribute("readonly", "");
                document.getElementById("staipaddress").setAttribute("readonly", "");
                document.getElementById("stasubnet").setAttribute("readonly", "");
                document.getElementById("stagateway").setAttribute("readonly", "");
                console.log('WiFi Station config false has been loaded');
            }
            if ("%apenabled%" == "1") {
                document.getElementById("apenabled").setAttribute("checked", "");
                document.getElementById("apssid").removeAttribute("readonly");
                document.getElementById("appwd").removeAttribute("readonly");
                document.getElementById("apipaddress").removeAttribute("readonly");
                document.getElementById("apsubnet").removeAttribute("readonly");
                document.getElementById("apgateway").removeAttribute("readonly");
                console.log('WiFi AP config true has been loaded');
            }
            else {
                document.getElementById("apenabled").removeAttribute("checked", "");
                document.getElementById("apssid").setAttribute("readonly", "");
                document.getElementById("appwd").setAttribute("readonly", "");
                document.getElementById("apipaddress").setAttribute("readonly", "");
                document.getElementById("apsubnet").setAttribute("readonly", "");
                document.getElementById("apgateway").setAttribute("readonly", "");
                console.log('WiFi AP config false has been loaded');
            }
            if ("%ethenabled%" == "1") {
                document.getElementById("ethenabled").setAttribute("checked", "");
                console.log('Ethernet config true has been loaded');
            }
            else {
                console.log('Ethernet config false has been loaded');
                document.getElementById("ethenabled").removeAttribute("checked", "");
            }
        };
        window.onload = setDefaults();

    </script>

</body>

</html>